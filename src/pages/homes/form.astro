---
import Layout from '~/layouts/PageLayout.astro';
import Header from '~/components/widgets/Header.astro';
import Hero2 from '~/components/widgets/Hero2.astro';
import Features from '~/components/widgets/Features.astro';
import Steps2 from '~/components/widgets/Steps2.astro';
import FAQs from '~/components/widgets/FAQs.astro';
import BlogLatestPosts from '~/components/widgets/BlogLatestPosts.astro';

const metadata = {
  title: 'Details Form',
};

function handleFormButtonClick(event) {
  event.preventDefault(); // Prevent default link behavior

  // Check if the form div and script are already added
  if (!document.querySelector('[data-fillout-id="mDshDd62R3us"]')) {
    // Create and insert the div element
    const div = document.createElement('div');
    div.setAttribute('data-fillout-id', 'mDshDd62R3us');
    div.setAttribute('data-fillout-embed-type', 'popup');
    div.setAttribute('data-fillout-dynamic-resize', '');
    div.setAttribute('data-fillout-button-float', 'bottom-right');
    div.setAttribute('data-fillout-inherit-parameters', '');
    div.setAttribute('data-fillout-popup-size', 'medium');
    document.body.appendChild(div);

    // Create and insert the script element
    const script = document.createElement('script');
    script.src = 'https://server.fillout.com/embed/v1/';
    document.body.appendChild(script);
  }
}

---
<Layout metadata={metadata}>
  <Fragment slot="header">
    <Header
      {...headerData}
      actions={[
        {
          variant: 'secondary',
          text: 'Get started',
          href: 'https://forms.fillout.com/t/mDshDd62R3us',
        },
        {
          variant: 'primary',
          text: 'IT Off-topics',
          href: '#',
        },
      ]}
      isSticky
    />
  </Fragment>

  <!-- Hero2 Widget ******************* -->
  <Hero2
    tagline="Make your experience better"
    actions={[
      {
        variant: 'primary',
        target: '_blank',
        text: 'Fill Out Form',
        href: '#',
        onClick: handleFormButtonClick, // Add onClick handler here
      },
      { text: 'Learn more', href: '#features' },
    ]}
    image={{
      src: 'https://cdn.pixabay.com/photo/2015/05/31/15/14/woman-792162_1280.jpg',
      alt: 'Hero Image',
    }}
  >
    <Fragment slot="title">
      with <span class="text-accent dark:text-white highlight">Off-topics Forms</span><br />
    </Fragment>

    <Fragment slot="subtitle">
      <span class="hidden sm:inline">
        To provide you with better content and a more personalized experience, we’d love to get to know you a little
        better. Please share some basic details with us so we can tailor our <span class="font-semibold"
          >Off-topics</span
        > just for you.</span
      >
    </Fragment>
  </Hero2>

  <!-- Features Widget *************** -->
  <Features
    id="features"
    title="Why We Need You to Fill Out This Form"
    subtitle="Collecting your data allows us to create a more personalized and effective experience."
    columns={2}
    items={[
      // Feature items
    ]}
  />

  <!-- FAQs Widget ******************* -->
  <FAQs
    title="Frequently Asked Questions"
    items={[
      // FAQ items
    ]}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </FAQs>

  <!-- Steps2 Widget ****************** -->
  <Steps2
    title="Reach out to us"
    subtitle="If you have any questions or need further assistance regarding the form or your data, please feel free to contact us. We’re here to help!!"
    callToAction={{
      text: 'Contact us',
      href: '/contact',
    }}
    items={[
      // Steps items
    ]}
  />

  <!-- BlogLatestPost Widget **************** -->
  <BlogLatestPosts
    id="blog"
    title="Stay informed with IT Off-topics blog"
    information={`IT Off-Topics Blog offers concise, informative posts on IT tutorials, academic tips, and open-source contributions. Stay updated with practical advice and industry trends to enhance your knowledge and skills.`}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </BlogLatestPosts>
</Layout>
